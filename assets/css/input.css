@import "tailwindcss";

@theme {
  /* Primary theme color - consistent across both modes */
  --color-primary-300: #c084fc;
  /* light purple (hover states) */
  --color-primary-400: #a855f7;
  /* purple (main primary) */
  --color-primary-500: #9333ea;
  /* medium purple */
  --color-primary-600: #7e22ce;
  /* dark purple (buttons) */
  --color-primary-700: #6b21a8;
  /* darker purple (button hover) */

  /* Font Family */
  --font-sans: 'Atkinson Hyperlegible', system-ui, -apple-system, sans-serif;
}

:root {
  /* Light Mode Colors (default) */
  --bg-primary: #ffffff;
  --bg-secondary: #f9fafb;
  --bg-tertiary: #f3f4f6;
  --text-primary: #111827;
  --text-secondary: #4b5563;
  --text-tertiary: #6b7280;
  --border-color: #e5e7eb;
  --border-color-dark: #d1d5db;
  --card-bg: #ffffff;
  --card-border: #e5e7eb;
  --code-bg: #f3f4f6;
  --code-text: #db2777;
  --pre-bg: #f8f9fa;
  --pre-text: #24292e;
}

[data-theme="dark"] {
  /* Dark Mode Colors */
  --bg-primary: #1a1a1a;
  --bg-secondary: #1f1f1f;
  --bg-tertiary: #262626;
  --text-primary: #e0e0e0;
  --text-secondary: #a3a3a3;
  --text-tertiary: #737373;
  --border-color: #404040;
  --border-color-dark: #525252;
  --card-bg: #1f1f1f;
  --card-border: #404040;
  --code-bg: #262626;
  --code-text: #ff79c6;
  --pre-bg: #1a1b26;
  --pre-text: #e0e0e0;
}

@theme {
  /* Map CSS variables to Tailwind colors */
  --color-dark-bg: var(--bg-primary);
  --color-dark-text: var(--text-primary);
}

@layer base {
  body {
    @apply antialiased font-sans transition-colors duration-200;
    background-color: var(--bg-primary);
    color: var(--text-primary);
  }

  a:hover,
  button:hover {
    @apply text-primary-500 underline decoration-2 decoration-primary-500;
  }
}

@layer utilities {
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

@layer components {

  /* Post Layout - TOC + Content Side by Side */
  .post-layout-wrapper {
    @apply relative flex flex-col lg:flex-row gap-4 lg:gap-6;
  }

  /* Table of Contents Sidebar */
  .toc-sidebar {
    @apply w-full lg:w-64 shrink-0 order-2 lg:order-1;
  }

  .toc-sticky {
    @apply rounded-lg p-5;
    background-color: var(--card-bg);
    border: 1px solid var(--card-border);
    /* Sticky positioning on desktop */
    position: sticky;
    top: 2rem;
    max-height: calc(100vh - 4rem);
    overflow-y: auto;
  }

  /* Hide scrollbar but keep functionality */
  .toc-sticky::-webkit-scrollbar {
    width: 4px;
  }

  .toc-sticky::-webkit-scrollbar-track {
    background: transparent;
  }

  .toc-sticky::-webkit-scrollbar-thumb {
    background: var(--border-color-dark);
    border-radius: 2px;
  }

  .toc-sticky::-webkit-scrollbar-thumb:hover {
    background: var(--text-tertiary);
  }

  .toc-header {
    @apply text-base font-bold mb-3 flex items-center gap-2;
    color: var(--text-primary);
  }

  .toc-emoji {
    @apply text-base;
  }

  .toc-list {
    @apply space-y-0 list-none;
  }

  .toc-item {
    @apply leading-normal;
  }

  .toc-h2 {
    @apply mb-0;
  }

  .toc-sublist {
    @apply ml-6 mt-1 space-y-0.5 pl-3 border-l-2 list-none;
  }

  .toc-link {
    @apply transition-colors text-sm block py-0.5 no-underline;
  }

  .toc-link:hover {
    color: var(--color-primary-300);
  }

  .toc-link.active {
    @apply font-bold;
    color: var(--color-primary-400);
  }

  .toc-number {
    @apply font-normal mr-1;
    color: var(--text-tertiary);
  }

  .toc-link.active .toc-number {
    color: var(--color-primary-400);
  }

  .toc-bullet {
    @apply mr-1.5;
  }

  .toc-h3 .toc-link {
    @apply text-xs;
  }

  .toc-h3 .toc-link.active {
    @apply font-bold;
    color: var(--color-primary-400);
  }

  /* Main Content Area */
  .post-content-area {
    @apply flex-1 min-w-0 order-1 lg:order-2;
  }

  /* On mobile, show TOC at bottom */
  @media (max-width: 1023px) {
    .toc-sidebar {
      @apply mt-8;
    }

    .toc-sticky {
      position: static;
      max-height: none;
    }
  }

  /* Article Content Styles */
  .article-content {
    @apply leading-relaxed text-base;
    color: var(--text-secondary);
  }

  .article-content h2 {
    @apply text-3xl font-bold mt-12 mb-6 scroll-mt-8;
    color: var(--text-primary);
  }

  .article-content h3 {
    @apply text-2xl font-bold mt-8 mb-4 scroll-mt-8;
    color: var(--text-primary);
  }

  .article-content h4 {
    @apply text-xl font-bold mt-6 mb-3;
    color: var(--text-primary);
  }

  .article-content p {
    @apply mb-5 leading-relaxed;
  }

  .article-content ul,
  .article-content ol {
    @apply mb-6 ml-6 space-y-2;
  }

  .article-content li {
    @apply leading-relaxed;
  }

  .article-content ul li {
    @apply list-disc;
  }

  .article-content ol li {
    @apply list-decimal;
  }

  .article-content a {
    @apply text-blue-400 hover:text-blue-300 underline;
  }

  .article-content strong {
    @apply font-bold;
    color: var(--text-primary);
  }

  .article-content em {
    @apply italic;
  }

  .article-content code {
    @apply px-2 py-0.5 rounded text-sm font-mono;
    background-color: var(--code-bg);
    color: var(--code-text);
  }

  .article-content pre {
    @apply rounded-lg overflow-x-auto mb-6;
    background-color: var(--pre-bg) !important;
    border: 1px solid var(--border-color);
    padding: 1.25rem;
  }

  .article-content pre code {
    @apply bg-transparent p-0 text-sm leading-relaxed font-mono;
    background-color: transparent !important;
    color: var(--pre-text);
  }

  .article-content pre code.hljs {
    @apply p-0;
    background-color: transparent !important;
  }

  .article-content blockquote {
    @apply border-l-4 pl-6 pr-4 py-2 italic my-6;
    border-color: var(--border-color-dark);
    color: var(--text-tertiary);
    background-color: var(--bg-secondary);
  }

  .article-content hr {
    @apply my-8;
    border-color: var(--border-color);
  }

  /* Tables */
  .article-content table {
    @apply w-full my-6 border-collapse;
    border: 1px solid var(--border-color);
  }

  .article-content thead {
    background-color: var(--bg-tertiary);
  }

  .article-content th {
    @apply font-semibold text-left px-4 py-3;
    color: var(--text-primary);
    border: 1px solid var(--border-color);
  }

  .article-content td {
    @apply px-4 py-3;
    color: var(--text-secondary);
    border: 1px solid var(--border-color);
  }

  .article-content tbody tr:hover {
    background-color: var(--bg-secondary);
  }

  /* Separator text */
  .article-content .separator-text {
    @apply text-gray-500 text-sm italic my-4;
  }

  /* Metadata Section */
  .metadata-box {
    @apply rounded-lg p-5;
    background-color: var(--card-bg);
    border: 1px solid var(--card-border);
  }

  .metadata-title {
    @apply text-base font-bold mb-4;
    color: var(--text-primary);
  }

  .metadata-row {
    @apply flex gap-4 mb-3 last:mb-0;
  }

  .metadata-label {
    @apply font-normal min-w-[80px];
    color: var(--text-primary);
  }

  .metadata-value {
    color: var(--text-secondary);
  }

  .metadata-tags {
    @apply flex flex-wrap gap-2;
  }

  .tag-pill {
    @apply px-3 py-1 rounded-full text-sm no-underline transition-colors;
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
  }

  .tag-pill:hover {
    background-color: var(--border-color-dark);
  }

  /* Page Layout Styles */
  .prose {
    @apply leading-relaxed;
    color: var(--text-secondary);
  }

  .prose h2 {
    @apply text-2xl font-bold mt-8 mb-4;
    color: var(--text-primary);
  }

  .prose h3 {
    @apply text-xl font-bold mt-6 mb-3;
    color: var(--text-primary);
  }

  .prose p {
    @apply mb-4;
  }

  .prose ul {
    @apply mb-4 ml-6 space-y-2;
  }

  .prose li {
    @apply list-disc;
  }

  .prose a {
    @apply text-blue-400 hover:text-blue-300 underline;
  }

  .prose strong {
    @apply font-bold;
    color: var(--text-primary);
  }

  .prose table {
    @apply w-full my-6 border-collapse;
    border: 1px solid var(--border-color);
  }

  .prose thead {
    background-color: var(--bg-tertiary);
  }

  .prose th {
    @apply font-semibold text-left px-4 py-3;
    color: var(--text-primary);
    border: 1px solid var(--border-color);
  }

  .prose td {
    @apply px-4 py-3;
    color: var(--text-secondary);
    border: 1px solid var(--border-color);
  }

  .prose tbody tr:hover {
    background-color: var(--bg-secondary);
  }

  /* Theme Toggle Button */
  .theme-toggle {
    @apply relative inline-flex items-center justify-center w-10 h-10 rounded-lg transition-colors;
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
  }

  .theme-toggle:hover {
    background-color: var(--border-color);
  }

  .theme-toggle svg {
    @apply w-5 h-5;
  }

  /* Header and footer borders */
  .header-border,
  .footer-border {
    border-color: var(--border-color);
  }

  .footer-text {
    color: var(--text-tertiary);
  }

  /* Search modal */
  .search-modal-content {
    background-color: var(--card-bg);
    border: 1px solid var(--card-border);
  }

  .search-modal-border {
    border-color: var(--border-color);
  }

  /* Tags page */
  .tag-badge {
    @apply px-4 py-2 rounded-lg transition-colors no-underline inline-block;
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
  }

  .tag-badge:hover {
    background-color: var(--border-color-dark);
  }

  .tag-count {
    color: var(--text-tertiary);
  }

  /* Projects page */
  .project-card {
    background-color: var(--card-bg);
    border: 1px solid var(--card-border);
  }

  .project-card:hover {
    border-color: var(--color-primary-500);
  }

  .project-list-item {
    border-bottom: 1px solid var(--border-color);
  }

  .tech-tag {
    @apply px-2 py-1 rounded text-xs inline-block;
    background-color: var(--bg-tertiary);
    color: var(--text-secondary);
  }

  .status-badge {
    @apply px-2 py-1 text-xs rounded inline-block;
    background-color: #059669;
    color: #d1fae5;
  }

  [data-theme="dark"] .status-badge {
    background-color: rgba(6, 95, 70, 0.5);
    color: #86efac;
  }

  .project-description {
    color: var(--text-secondary);
  }

  .page-description {
    @apply text-lg;
    color: var(--text-secondary);
  }

  /* Homepage */
  .homepage-tagline {
    @apply text-xl;
    color: var(--text-secondary);
  }

  .homepage-link-text {
    color: var(--text-secondary);
  }

  .homepage-link {
    @apply underline transition-colors;
  }

  .homepage-link:hover {
    color: var(--text-primary);
  }

  /* Articles page */
  .article-item {
    border-bottom: 1px solid var(--border-color);
  }

  .article-date {
    @apply text-sm;
    color: var(--text-tertiary);
  }

  .article-excerpt {
    color: var(--text-secondary);
  }

  .article-tag {
    @apply px-2 py-1 rounded text-xs;
    background-color: var(--bg-tertiary);
    color: var(--text-secondary);
  }

  /* Pagination */
  .pagination-btn {
    @apply px-4 py-2 rounded transition-colors no-underline;
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
  }

  .pagination-btn:hover {
    background-color: var(--border-color-dark);
  }

  .pagination-btn-disabled {
    @apply px-4 py-2 rounded cursor-not-allowed;
    background-color: var(--bg-secondary);
    color: var(--text-tertiary);
  }

  .pagination-page {
    @apply px-3 py-2 rounded transition-colors no-underline;
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
  }

  .pagination-page:hover {
    background-color: var(--border-color-dark);
  }

  .pagination-page-active {
    @apply px-3 py-2 rounded font-bold;
    background-color: var(--color-primary-600);
    color: #ffffff;
  }

  .pagination-info {
    @apply text-center text-sm mt-4;
    color: var(--text-tertiary);
  }

  /* Syntax Highlighting for Code Blocks - Light Mode */
  .article-content pre code .comment {
    color: #6a737d;
  }

  .article-content pre code .keyword {
    color: #d73a49;
  }

  .article-content pre code .class-name {
    color: #6f42c1;
  }

  .article-content pre code .string {
    color: #032f62;
  }

  .article-content pre code .number {
    color: #005cc5;
  }

  .article-content pre code .function {
    color: #6f42c1;
  }

  .article-content pre code .operator {
    color: #d73a49;
  }

  /* Make all token types darker in light mode */
  .article-content pre code .token {
    color: #24292e;
  }

  /* Syntax Highlighting for Code Blocks - Dark Mode */
  [data-theme="dark"] .article-content pre code .comment {
    color: #6272a4;
  }

  [data-theme="dark"] .article-content pre code .keyword {
    color: #bd93f9;
  }

  [data-theme="dark"] .article-content pre code .class-name {
    color: #8be9fd;
  }

  [data-theme="dark"] .article-content pre code .string {
    color: #f1fa8c;
  }

  [data-theme="dark"] .article-content pre code .number {
    color: #bd93f9;
  }

  [data-theme="dark"] .article-content pre code .function {
    color: #50fa7b;
  }

  [data-theme="dark"] .article-content pre code .operator {
    color: #ff79c6;
  }
}